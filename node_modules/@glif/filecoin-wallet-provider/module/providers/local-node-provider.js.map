{"version":3,"sources":["../../src/providers/local-node-provider.ts"],"names":["LotusRpcEngine","LocalNodeProvider","constructor","options","apiAddress","token","jsonRpcEngine","newAccount","request","getAccounts","sign","from","message"],"mappings":";AAAA,OAAOA,cAAP,MAA2B,2BAA3B;AASA,OAAO,MAAMC,iBAAN,CAAqD;AAK1DC,EAAAA,WAAW,CAACC,OAAD,EAAoC;AAAA;;AAAA;;AAAA;;AAC7C,SAAKC,UAAL,GAAkBD,OAAO,CAACC,UAA1B;AACA,SAAKC,KAAL,GAAaF,OAAO,CAACE,KAArB;AACA,SAAKC,aAAL,GAAqB,IAAIN,cAAJ,CAAmB;AACtCI,MAAAA,UAAU,EAAED,OAAO,CAACC,UADkB;AAEtCC,MAAAA,KAAK,EAAEF,OAAO,CAACE;AAFuB,KAAnB,CAArB;AAID;;AAEDE,EAAAA,UAAU,GAAoB;AAC5B,WAAO,KAAKD,aAAL,CAAmBE,OAAnB,CAAmC,WAAnC,EAAgD,WAAhD,CAAP;AACD;;AAEDC,EAAAA,WAAW,GAAsB;AAC/B,WAAO,KAAKH,aAAL,CAAmBE,OAAnB,CAAqC,YAArC,CAAP;AACD;;AAEDE,EAAAA,IAAI,CAACC,IAAD,EAAeC,OAAf,EAAmE;AACrE,WAAO,KAAKN,aAAL,CAAmBE,OAAnB,CACL,mBADK,EAELG,IAFK,EAGLC,OAHK,CAAP;AAKD;;AA5ByD","sourcesContent":["import LotusRpcEngine from '@glif/filecoin-rpc-client'\nimport { LotusMessage, SignedLotusMessage } from '@glif/filecoin-message'\nimport { WalletSubProvider } from '../wallet-sub-provider'\n\nexport type LocalNodeProviderOptions = {\n  apiAddress: string\n  token?: string\n}\n\nexport class LocalNodeProvider implements WalletSubProvider {\n  readonly apiAddress: string\n  readonly token?: string\n  readonly jsonRpcEngine: LotusRpcEngine\n\n  constructor(options: LocalNodeProviderOptions) {\n    this.apiAddress = options.apiAddress\n    this.token = options.token\n    this.jsonRpcEngine = new LotusRpcEngine({\n      apiAddress: options.apiAddress,\n      token: options.token,\n    })\n  }\n\n  newAccount(): Promise<string> {\n    return this.jsonRpcEngine.request<string>('WalletNew', 'secp256k1')\n  }\n\n  getAccounts(): Promise<string[]> {\n    return this.jsonRpcEngine.request<string[]>('WalletList')\n  }\n\n  sign(from: string, message: LotusMessage): Promise<SignedLotusMessage> {\n    return this.jsonRpcEngine.request<SignedLotusMessage>(\n      'WalletSignMessage',\n      from,\n      message,\n    )\n  }\n}\n"],"file":"local-node-provider.js"}